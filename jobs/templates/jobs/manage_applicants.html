{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

    <h2 class="text-primary fw-bold">
        Applicants for: {{ job.title }}
    </h2>
    <p class="text-muted">
        Posted by <strong>{{ job.posted_by.username }}</strong> on {{ job.created_at|date:"M d, Y" }}
    </p>

    <hr>

    {% if applicants %}
        <div class="list-group">

            {% for app in applicants %}
                <div class="list-group-item mb-3 shadow-sm">

                    <h5>{{ app.applicant.username }}</h5>

                    <p><strong>Applied on:</strong> {{ app.applied_at|date:"M d, Y" }}</p>

                    <p><strong>Cover Letter:</strong><br>
                        {{ app.cover_letter }}
                    </p>

                    {% if app.resume %}
                        <p>
                            <strong>Resume:</strong>
                            <a href="{{ app.resume.url }}" 
                               class="btn btn-sm btn-primary"
                               download>
                                Download Resume
                            </a>
                        </p>
                    {% else %}
                        <p class="text-muted"><strong>Resume:</strong> No resume uploaded.</p>
                    {% endif %}

                    <!-- Accept / Reject / Schedule Interview Buttons -->
                    <div class="mt-3">
                        <a href="{% url 'accept_application' app.id %}" class="btn btn-success btn-sm">
                            Accept
                        </a>

                        <a href="{% url 'reject_application' app.id %}" class="btn btn-danger btn-sm">
                            Reject
                        </a>

                        <!-- â­ New Interview Scheduling Button -->
                        <a href="{% url 'schedule_interview' app.id %}" class="btn btn-info btn-sm ms-2">
                            Schedule Interview
                        </a>
                    </div>

                </div>
            {% endfor %}

        </div>
    {% else %}
        <p class="text-center text-muted mt-4">No applicants yet.</p>
    {% endif %}

</div>

{% endblock %}
